$(document).ready(function(){function t(){O=[],b.each(function(){O.push({hook:$(this).attr("href"),offset:$($(this).attr("href")).offset().top})})}function e(){I===!0&&(y=$("#main-section").offset().top-18),t()}function n(t){return 0==c&&0==d?path.animate({path:pathConfig.to},u,m,function(){path.animate({path:pathConfig.from},g,m)}):1==c&&0==d&&path.animate({path:pathConfigBack.to},u,m,function(){path.animate({path:pathConfigBack.from},g,m)}),l.show().toggleClass("active"),r.toggleClass("active"),$("#shape-morph").toggleClass("active"),c=!c,!1}function a(t){t.preventDefault(),$("html, body").animate({scrollTop:0},200)}function i(t){$("html, body").animate({scrollTop:$(t).offset().top},200)}function o(){if(T=$(window).scrollTop(),1==c&&n(),T>50&&1==h?(f.toggleClass("active"),h=!1):50>=T&&0==h&&(f.toggleClass("active"),h=!0),1==I){T>y?x.addClass("affixed"):x.removeClass("affixed");for(var t=0;t<O.length;t++)T>=O[t].offset-10&&($("#main-navigation li a[href='"+O[t].hook+"']").hasClass("active")||(b.removeClass("active"),$("#main-navigation li a[href='"+O[t].hook+"']").addClass("active")))}}console.log("offKit says hello to you, sailor!");var l=$("#nav-offkit"),r=$("#menu-btn"),f=$("#top-btn"),c=!1,h=!0,d=!1,p=!1,u=200,g=200,m=mina.easeout;s=Snap("#shape-morph"),path=s.select("path"),pathConfig={from:path.attr("d"),to:"M0e-10,0 L100,0 L100,10 C70,80 30,80 -10e-10,10 C0e-10,10 0e-10,0 0e-10,0 Z"},pathConfigBack={from:path.attr("d"),to:"M0e-10,0 L100,0 L100,50 C50,0e-10 50,0 0,50 C10e-10,50 0e-10,0 0e-10,0 Z"};var v=Snap("#header-logo svg"),C=v.select("#offkit-circle circle"),k=v.select("#offkit-circle path"),w=v.select("#offkit-letter");if($("#header-logo svg").on("mouseenter",function(){C.stop().animate({r:34},420,mina.elastic),k.stop().animate({fill:"whitesmoke"},200,m),w.stop().animate({fill:"whitesmoke"},200,m)}),$("#header-logo svg").on("mouseout, mouseleave",function(){C.stop().animate({r:0},100,m),k.stop().animate({fill:"black"},200,m),w.stop().animate({fill:"black"},200,m)}),0!=$("#main-navigation").length){var x=$("#main-navigation"),b=$("#main-navigation li a"),y=$("#main-section").offset().top-18,T=0,I=!0,O=[];t(),b.on("click",function(t){t.preventDefault(),i($(this).attr("href"))})}else var I=!1;0!=$(".internal").length&&$(".internal").on("click",function(t){t.preventDefault(),i($(this).attr("href"))}),Modernizr.inlinesvg||($("#shape-morph").remove(),d=!0,l.find("ul").css("padding","0.85em 0 1.5em 0")),T=$(window).scrollTop(),T>50&&1==h&&(f.toggleClass("active"),h=!1),$(window).resize(e),0!=$("#live-search").length&&$("#l-s-input").on("keyup blur",function(){var t=$(this),e=t.val();if(searching=!1,count=0,$("#l-s-find-next").unbind("click"),$("#l-s-icon").text("â€¦"),""==e||e.length<=2||e.match(/^\s*$/))searching=!1,$("#content").find(".l-s-highlight").contents().unwrap(),$(".l-s-faded").removeClass("l-s-faded").fadeIn(),$("#intro-text").fadeIn(),$("#l-s-find-next").fadeOut(),x.find("a").removeClass("l-s-striked"),$("#l-s-icon").text("S"),$("#l-s-icon").unbind("click");else{searching=!0;var n=new RegExp("("+e+"+(?![^<>]*>))","igm");$("#content").find(".l-s-highlight").contents().unwrap(),$("#content article").each(function(){var t=$(this).attr("id");if($(this).html().search(n)<0)$(this).addClass("l-s-faded"),x.find("a[href=#"+t+"]").addClass("l-s-striked");else{var e=$(this).html(),a=e.replace(n,"<span class='l-s-highlight'>$1</span>");$(this).html(a),count++,$(this).addClass("l-s-faded")&&($(this).removeClass("l-s-faded").fadeIn(),x.find("a[href=#"+t+"]").removeClass("l-s-striked"))}});var a=count;if(a>0){var i=!1;$("#intro-text").fadeOut(),$(".l-s-faded").fadeOut();var o=$(".l-s-highlight").length;$("#l-s-find-next").fadeIn(100),$("#l-s-find-next").bind("click",function(){T=$(window).scrollTop(),count=-1,$(".l-s-highlight").each(function(){return count++,$(this).offset().top>=T+1?(console.log("finished"),!1):void 0}),(count==o||1==i)&&(count=0),count==o-1&&(i=!0),0==count&&(i=!1),$("html, body").animate({scrollTop:$($(".l-s-highlight")[count]).offset().top},200)})}else 1==!p&&($errorlog=$('<div id="#l-s-error" class="error" style="display:none;">nothing was found</div>'),$("#live-search").append($errorlog),p=!0),clearTimeout(toerror),$errorlog.fadeIn(function(){toerror=setTimeout(function(){$errorlog.fadeOut()},2e3)}),$(".l-s-faded").removeClass("l-s-faded").fadeIn(),$("#intro-text").fadeIn(),$("#l-s-find-next").fadeOut(),x.find("a").removeClass("l-s-striked");$("#l-s-icon").text("X"),$("#l-s-icon").bind("click",function(){$("#l-s-input").val(""),$("#l-s-input").trigger("keyup")})}}),r.on("click",n),f.on("click",a),$(window).on("scroll",o)});